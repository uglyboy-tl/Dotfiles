- clean:
    ~/.local/share/applications/:
      force: true

# Shell 命令执行阶段
- shell:
    - [
        git submodule update --init --recursive desktop data,
        更新桌面相关 submodule 模块,
      ]

- link:
    ~/.local/bin/:
      create: true # 创建目标目录
      glob: true # 使用通配符匹配
      path: desktop/scripts/* # 源文件路径
      relink: true # 允许重新链接
    ~/.local/share/applications/:
      create: true
      glob: true
      path: desktop/applications/*
      relink: true

    # Built-in
    $XDG_CONFIG_HOME/binup/config.toml: desktop/builtin/binup.toml # UV 配置

    ## Newsboat RSS 阅读器
    $XDG_CONFIG_HOME/newsboat/config: desktop/newsboat/config
    ## Zathura PDF 阅读器
    $XDG_CONFIG_HOME/zathura: desktop/zathura
    ## MUTT 邮件客户端
    $XDG_CONFIG_HOME/offlineimap/config: desktop/mutt/offlineimaprc # 邮件同步
    $XDG_CONFIG_HOME/mutt/muttrc: desktop/mutt/muttrc # Mutt 主配置
    $XDG_CONFIG_HOME/mutt/mailboxes: desktop/mutt/mailboxes # 邮箱配置
    $XDG_CONFIG_HOME/mutt/mailcap: desktop/mutt/mailcap # MIME 类型处理

    # X Window 系统配置
    # 环境变量配置
    ~/.xsessionrc: config/environment # X session 环境变量
    ## Xresources 资源文件
    $XDG_CONFIG_HOME/X11/Xresources: desktop/X11/Xresources # X 资源定义
    $XDG_CONFIG_HOME/X11/Xresources.d/rxvt-unicode: desktop/X11/rxvt-unicode # URxvt 终端配置
    ## 字体配置
    $XDG_CONFIG_HOME/fontconfig/fonts.conf: desktop/fonts.conf # 字体配置文件
    ## BSPWM 窗口管理器生态
    $XDG_CONFIG_HOME/bspwm/bspwmrc: desktop/bspwmrc # BSPWM 主配置
    $XDG_CONFIG_HOME/sxhkd/sxhkdrc: desktop/sxhkdrc # 快捷键配置
    $XDG_CONFIG_HOME/picom/picom.conf: desktop/picom.conf # 合成器配置
    $XDG_CONFIG_HOME/polybar: desktop/polybar # 状态栏配置
    $XDG_CONFIG_HOME/rofi: desktop/rofi # 应用启动器
    $XDG_CONFIG_HOME/dunst/dunstrc: desktop/dunstrc # 桌面通知

    ## 动态壁纸
    $XDG_DATA_HOME/dynamic-wallpaper: data/dynamic-wallpaper # 动态壁纸资源

    ## Alacritty 终端模拟器
    $XDG_CONFIG_HOME/alacritty: desktop/alacritty

    ## FCITX5-RIME 输入法
    $XDG_DATA_HOME/fcitx5/rime/default.custom.yaml: desktop/fcitx5-rime/default.custom.yaml # 默认输入方案
    $XDG_DATA_HOME/fcitx5/rime/luna_pinyin.custom.yaml: desktop/fcitx5-rime/luna_pinyin.custom.yaml # 拼音输入方案

    ## MPV 媒体播放器
    $XDG_CONFIG_HOME/mpv/mpv.conf: desktop/mpv/mpv.conf # MPV 主配置
    $XDG_CONFIG_HOME/mpv/scripts/thumbfast.lua: desktop/mpv/thumbfast/thumbfast.lua # 缩略图预览脚本
    $XDG_CONFIG_HOME/mpv/fonts: desktop/mpv/uosc/src/fonts # uosc 界面字体
    $XDG_CONFIG_HOME/mpv/scripts/uosc/char-conv: desktop/mpv/uosc/src/uosc/char-conv # 字符转换
    $XDG_CONFIG_HOME/mpv/scripts/uosc/elements: desktop/mpv/uosc/src/uosc/elements # 界面元素
    $XDG_CONFIG_HOME/mpv/scripts/uosc/intl: desktop/mpv/uosc/src/uosc/intl # 国际化
    $XDG_CONFIG_HOME/mpv/scripts/uosc/lib: desktop/mpv/uosc/src/uosc/lib # 库文件
    $XDG_CONFIG_HOME/mpv/scripts/uosc/main.lua: desktop/mpv/uosc/src/uosc/main.lua # uosc 主脚本
    $XDG_CONFIG_HOME/mpv/script-opts/uosc.conf: desktop/mpv/uosc.conf # uosc 配置文件

# Crontab 定时任务配置
- crontab:
    - time: 0 * * * * # 每小时执行一次
      command: env DISPLAY=:0 DESKTOP_SESSION=lightdm-xsession DBUS_SESSION_BUS_ADDRESS="unix:path=/run/user/1000/bus" dwall.sh -s lakeside
      platform: linux # 仅限 Linux 平台
