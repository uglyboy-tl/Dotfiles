#! /bin/sh
export TERM=linux

pgrep -x sxhkd > /dev/null || sxhkd &

# 灵感来源于 gk
_c() { bspc config "$@"; }
_m() { bspc monitor "$@"; }
_r() { bspc rule -a "$@"; }
_s() {
	pkill -x "$1"
	{
		sleep 0.1
		"$@" &
	}
}

_m -d I II III IV V VI

_c border_width         0
_c window_gap           10
_c split_ratio          0.52
_c borderless_monocle   true
_c gapless_monocle      true

_c pointer_modifier mod1
_c pointer_action1 resize_side
_c pointer_action1 resize_corner
_c pointer_action3 move

# 边框颜色
_c normal_border_color "#4C566A"
_c active_border_color "#434C5E"
_c focused_border_color "#2E3440"
_c presel_feedback_color "#3B4252"

# 启动服务
# 并行启动常规服务
(
    _s picom -b
    _s redshift
    _s dunst
    _s xsetroot -cursor_name left_ptr
    _s polybar --reload main
) &

# 动态壁纸
#_s ~/.fehbg
~/.local/bin/dwall.sh -s lakeside &
# 权限管理
/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &

_r Microsoft-edge desktop='^1' follow=on
_r Code desktop='^6' follow=on

_r obsidian desktop='^2' follow=on
_r Typora desktop='^2' follow=on
_r lf desktop='^3' follow=on
_r Zotero desktop='^3' follow=on
_r melonDS desktop='^4' follow=on
_r mpv desktop='^4' follow=on
_r Io.github.celluloid_player.Celluloid desktop='^4' follow=on
_r Bytedance-feishu desktop='^5' follow=on
_r TDAppDesktop desktop='^5' follow=on
_r discord desktop='^5' follow=on

_r rofi state=floating sticky=on
_r feh state=floating

_r Alacritty state=floating rectangle=1280x720+640+100
_r kitty state=floating rectangle=1280x720+640+100